<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RML Test Page</title>
    <style>
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        .test-section {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .rml-input {
            width: 100%;
            height: 200px;
            font-family: monospace;
            font-size: 14px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-bottom: 10px;
        }
        
        .convert-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin-bottom: 20px;
        }
        
        .convert-btn:hover {
            opacity: 0.9;
        }
        
        .output {
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 4px;
            background: white;
            min-height: 100px;
        }
        
        .instructions {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .instructions h2 {
            margin-top: 0;
        }
        
        .syntax-examples {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 4px;
            margin-top: 15px;
        }
        
        .example-code {
            background: rgba(0, 0, 0, 0.2);
            padding: 5px 8px;
            border-radius: 3px;
            font-family: monospace;
            display: inline-block;
            margin: 2px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="instructions">
            <h2>üöÄ RML (RazzMarkupLanguage) Test Page</h2>
            <p>This page allows you to test RML syntax and see the HTML output. RML uses curly braces <code>{}</code> for opening tags and dot notation <code>{.}</code> for closing tags.</p>
            
            <div class="syntax-examples">
                <strong>Quick Syntax Reference:</strong><br>
                <span class="example-code">{head1}Title{.head1}</span>
                <span class="example-code">{para}Text{.para}</span>
                <span class="example-code">{bold}Bold{.bold}</span>
                <span class="example-code">{link href="url"}Link{.link}</span>
            </div>
        </div>
        
        <div class="test-section">
            <h3>RML to HTML Converter</h3>
            <textarea class="rml-input" id="rmlInput" placeholder="Enter your RML content here...">{head1}Welcome to RML!{.head1}

{para}This is a sample RML document that demonstrates the syntax.{.para}

{head2}Features{.head2}

{list}
    {listitem}Easy to write{.listitem}
    {listitem}Beautiful output{.listitem}
    {listitem}Web-compatible{.listitem}
{.list}

{para}Try editing this text and clicking {bold}Convert to HTML{.bold}!{.para}

{quote}
"RML makes markup simple and intuitive."
{.quote}</textarea>
            
            <button class="convert-btn" onclick="convertRML()">Convert to HTML</button>
            
            <h4>HTML Output:</h4>
            <div class="output" id="htmlOutput"></div>
            
            <h4>Rendered Result:</h4>
            <div class="output" id="renderedOutput"></div>
        </div>
        
        <div class="test-section">
            <h3>Chrome Extension Test</h3>
            <p>If you have the RML Chrome extension installed, you can also:</p>
            <ul>
                <li>Open any <code>.rml</code> file in Chrome to see it rendered automatically</li>
                <li>Use the extension popup to parse content on any page</li>
                <li>Right-click on any page to access RML parsing options</li>
            </ul>
            
            <p><strong>Extension Status:</strong> <span id="extensionStatus">Checking...</span></p>
            <button onclick="checkExtension()">Check Extension</button>
        </div>
    </div>
    
    <script src="rml-parser.js"></script>
    <script>
        let parser;
        
        // Initialize parser
        try {
            parser = new RMLParser();
            console.log('RML Parser loaded successfully!');
        } catch (error) {
            console.error('Failed to load RML Parser:', error);
            document.getElementById('htmlOutput').innerHTML = '<strong style="color: red;">Error: RML Parser not found. Please ensure rml-parser.js is in the same directory.</strong>';
        }
        
        function convertRML() {
            const rmlInput = document.getElementById('rmlInput').value;
            const htmlOutput = document.getElementById('htmlOutput');
            const renderedOutput = document.getElementById('renderedOutput');
            
            if (!parser) {
                htmlOutput.innerHTML = '<strong style="color: red;">RML Parser not available</strong>';
                return;
            }
            
            try {
                const htmlResult = parser.parse(rmlInput);
                
                // Show HTML source
                htmlOutput.innerHTML = `<pre><code>${htmlResult.replace(/</g, '&lt;').replace(/>/g, '&gt;')}</code></pre>`;
                
                // Show rendered result
                renderedOutput.innerHTML = htmlResult;
                
                console.log('RML converted successfully!');
            } catch (error) {
                htmlOutput.innerHTML = `<strong style="color: red;">Conversion Error: ${error.message}</strong>`;
                console.error('RML conversion error:', error);
            }
        }
        
        function checkExtension() {
            const statusElement = document.getElementById('extensionStatus');
            
            // Try to detect if RML extension is active
            if (window.RMLParser && typeof window.RMLParser === 'function') {
                statusElement.innerHTML = '<span style="color: green;">‚úÖ RML Extension Active</span>';
            } else {
                statusElement.innerHTML = '<span style="color: orange;">‚ö†Ô∏è Extension not detected or inactive</span>';
            }
            
            // Also check for extension-specific indicators
            const rmlIndicator = document.querySelector('.rml-indicator');
            if (rmlIndicator) {
                statusElement.innerHTML = '<span style="color: green;">‚úÖ RML Extension Active (indicator found)</span>';
            }
        }
        
        // Auto-convert on page load
        window.addEventListener('load', function() {
            convertRML();
            setTimeout(checkExtension, 1000);
        });
        
        // Auto-convert on input change (with debouncing)
        let timeout;
        document.getElementById('rmlInput').addEventListener('input', function() {
            clearTimeout(timeout);
            timeout = setTimeout(convertRML, 500);
        });
        
        // Check extension status periodically
        setInterval(checkExtension, 5000);
    </script>
</body>
</html> 